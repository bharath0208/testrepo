# service.ml-repository.log.truncate = 100

outbound-dispatcher {
  type = Dispatcher
  executor = fork-join-executor
}

iam {
  cluster {
    url = "https://api.dataplatform.dev.cloud.ibm.com"
  }
  client {
    auth = "IAM"
  }
  apikey = ${WML_API_KEY}
}

icp {
  cluster {
    url = "https://repo-cpd-repo.apps.frank-v4-repo.os.fyre.ibm.com"
  }
  client {
    auth = "ICP"
  }
  token {
    username = "icp4d-dev"
    password = "SY5ZX10lpGrW4"
    url = "https://repo-cpd-repo.apps.frank-v4-repo.os.fyre.ibm.com"
  }
}

# this is the cluster for CAMS and spaces for the tests that use the platform directly
cluster {
  url = "https://api.dataplatform.dev.cloud.ibm.com"
  url.old = "https://repo-cpd-repo.apps.frank-v4-repo.os.fyre.ibm.com"
}

client {
  auth.old = "ICP"
  auth = "IAM"
}

icp {
  token {
    username = "icp4d-dev"
    password = "SY5ZX10lpGrW4"
    url = "https://repo-cpd-repo.apps.frank-v4-repo.os.fyre.ibm.com"
  }
}

TEST {
  iam {
    apikey = ${WML_API_KEY}
  }
}

# just for the tests
tests {
  duration = 10 minutes
}

service {
  ml-repository {
    log {
      pretty-print = true
    }
  }
  
  v1-lite-plans {
    # start the checks at SEP 1 2020 GMT +4 (EST/EDT)
    start-checks = 1597433461000
    # check that "v1 APIs use v1 instances" and
    # "v2 APIs use v2 instances (or no instance)"
    enable-plan-checks = true
  }
}

doc-root = "https://cloud.ibm.com/apidocs/machine-learning"
api {
  doc-url = ${doc-root}
  doc-url-experiments = ${doc-root}"#create-a-new-experiment"
  doc-url-functions = ${doc-root}"#create-a-new-function"
  doc-url-models = ${doc-root}"#create-a-new-model"
  doc-url-model_definitions = ${doc-root}"#create-a-new-model-definition"
  doc-url-pipelines = ${doc-root}"#create-a-new-pipeline"
  doc-url-training_definitions = ${doc-root}"#create-a-new-training-definition"
}
